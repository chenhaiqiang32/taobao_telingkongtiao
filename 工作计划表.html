<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作计划表</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: #f5f5f5;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 5px;
        }

        .header .date {
            font-size: 14px;
            color: #666;
        }

        .section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .task-list {
            list-style: none;
        }

        .task-item {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
        }

        .task-meta {
            font-size: 12px;
            color: #999;
        }

        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            margin-right: 8px;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-in-progress {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .day-section {
            margin-bottom: 25px;
        }

        .day-header {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e0e0e0;
        }

        .day-header.today {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .day-tasks {
            margin-left: 10px;
        }

        .day-task {
            padding: 8px 0;
            font-size: 13px;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
        }

        .day-task:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>工作计划表</h1>
            <div class="date" id="currentDate"></div>
        </div>

        <div class="section">
            <h2 class="section-title">今日工作内容</h2>
            <ul class="task-list" id="todayTasks"></ul>
        </div>

        <div class="section">
            <h2 class="section-title">一周计划安排</h2>
            <div id="weekPlan"></div>
        </div>
    </div>

    <script>
        const today = new Date();
        const todayStr = `${today.getFullYear()}年${today.getMonth() + 1}月${today.getDate()}日`;
        document.getElementById('currentDate').textContent = todayStr;

        // 计算本周五的日期
        function getThisFriday() {
            const currentDay = today.getDay(); // 0=周日, 1=周一, ..., 5=周五, 6=周六
            const daysUntilFriday = currentDay === 0 ? 5 : (5 - currentDay); // 如果今天是周日，需要+5天；否则计算到周五的天数
            const friday = new Date(today);
            friday.setDate(today.getDate() + daysUntilFriday);
            return friday;
        }

        const thisFriday = getThisFriday();

        // 生成从今天到本周五的所有日期
        function getDaysUntilFriday() {
            const days = [];
            const current = new Date(today);
            const friday = new Date(thisFriday);
            
            while (current <= friday) {
                days.push(new Date(current));
                current.setDate(current.getDate() + 1);
            }
            return days;
        }

        const workDays = getDaysUntilFriday();

        const todayTasks = [
            {
                title: '根据数据控制子场景的设备的颜色和动画的运行',
                status: 'in-progress',
                priority: '高'
            },
            {
                title: '工作台整体效果调试',
                status: 'pending',
                priority: '高'
            },
            {
                title: '工作台界面和楼层界面的切换逻辑',
                status: 'pending',
                priority: '中'
            },
            {
                title: '根据传入数据，点击工作台设备显示动态的数据的css2d弹窗',
                status: 'pending',
                priority: '中'
            }
        ];

        // 将任务拆分成详细的子任务，分配到从今天到周五
        const weekPlan = workDays.map((date, index) => {
            const isToday = date.toDateString() === today.toDateString();
            let tasks = [];

            // 根据索引分配详细任务，确保内容丰富且不重复
            if (index === 0) {
                // 今天：根据数据控制子场景的设备的颜色和动画的运行
                tasks = [
                    { title: '分析数据结构，设计设备颜色控制接口', status: 'in-progress', hours: 2 },
                    { title: '实现设备颜色动态变化功能，支持多种颜色状态', status: 'in-progress', hours: 2 },
                    { title: '开发动画控制逻辑，实现播放、暂停、停止功能', status: 'pending', hours: 2 },
                    { title: '编写单元测试，验证颜色和动画控制功能', status: 'pending', hours: 1 }
                ];
            } else if (index === 1) {
                // 第二天：工作台整体效果调试
                tasks = [
                    { title: '调试工作台光照效果，调整环境光和方向光参数', status: 'pending', hours: 1.5 },
                    { title: '优化材质渲染效果，调整金属度和粗糙度', status: 'pending', hours: 1.5 },
                    { title: '测试阴影效果，确保阴影质量和性能平衡', status: 'pending', hours: 1 },
                    { title: '调整相机角度和视野，优化视觉效果', status: 'pending', hours: 1 },
                    { title: '性能优化，检查帧率并优化渲染管线', status: 'pending', hours: 1 }
                ];
            } else if (index === 2) {
                // 第三天：工作台界面和楼层界面的切换逻辑
                tasks = [
                    { title: '设计场景切换状态管理机制', status: 'pending', hours: 1 },
                    { title: '实现工作台到楼层界面的切换动画', status: 'pending', hours: 2 },
                    { title: '实现楼层到工作台界面的切换动画', status: 'pending', hours: 1.5 },
                    { title: '优化相机过渡动画，确保平滑切换', status: 'pending', hours: 1 },
                    { title: '处理切换过程中的资源加载和释放', status: 'pending', hours: 1 },
                    { title: '测试切换逻辑，修复可能的边界情况', status: 'pending', hours: 0.5 }
                ];
            } else if (index === 3) {
                // 第四天：根据传入数据，点击工作台设备显示动态的数据的css2d弹窗
                tasks = [
                    { title: '设计CSS2D弹窗组件结构，定义样式规范', status: 'pending', hours: 1 },
                    { title: '实现弹窗显示和隐藏的动画效果', status: 'pending', hours: 1.5 },
                    { title: '开发数据绑定机制，动态渲染设备信息', status: 'pending', hours: 2 },
                    { title: '实现点击事件监听，处理设备选择逻辑', status: 'pending', hours: 1 },
                    { title: '优化弹窗定位算法，确保在不同视角下正确显示', status: 'pending', hours: 1 },
                    { title: '添加弹窗关闭功能和交互优化', status: 'pending', hours: 0.5 }
                ];
            } else if (index === 4) {
                // 第五天（周五）：测试和优化
                tasks = [
                    { title: '功能测试：验证所有功能模块是否正常工作', status: 'pending', hours: 1.5 },
                    { title: '性能测试：检查内存泄漏和帧率表现', status: 'pending', hours: 1 },
                    { title: '兼容性测试：在不同浏览器和设备上测试', status: 'pending', hours: 1 },
                    { title: '修复测试中发现的问题和bug', status: 'pending', hours: 1.5 },
                    { title: '代码优化：重构和优化代码结构', status: 'pending', hours: 1 },
                    { title: '文档整理：更新开发文档和使用说明', status: 'pending', hours: 0.5 }
                ];
            }

            return {
                date: date,
                isToday: isToday,
                tasks: tasks
            };
        });

        function renderTodayTasks() {
            const container = document.getElementById('todayTasks');
            container.innerHTML = todayTasks.map(task => {
                const statusText = task.status === 'in-progress' ? '进行中' : 
                                 task.status === 'completed' ? '已完成' : '待开始';
                const statusClass = task.status === 'in-progress' ? 'status-in-progress' : 
                                  task.status === 'completed' ? 'status-completed' : 'status-pending';
                
                return `
                    <li class="task-item">
                        <div class="task-title">${task.title}</div>
                        <div class="task-meta">
                            <span class="status ${statusClass}">${statusText}</span>
                            <span>优先级: ${task.priority}</span>
                        </div>
                    </li>
                `;
            }).join('');
        }

        function renderWeekPlan() {
            const container = document.getElementById('weekPlan');
            container.innerHTML = weekPlan.map(day => {
                const date = new Date(day.date);
                const dateStr = `${date.getMonth() + 1}月${date.getDate()}日`;
                const weekDay = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'][date.getDay()];
                
                return `
                    <div class="day-section">
                        <div class="day-header ${day.isToday ? 'today' : ''}">
                            ${dateStr} ${weekDay}${day.isToday ? ' (今天)' : ''}
                        </div>
                        <div class="day-tasks">
                            ${day.tasks.map(task => {
                                const statusText = task.status === 'in-progress' ? '进行中' : 
                                                 task.status === 'completed' ? '已完成' : '待开始';
                                const statusClass = task.status === 'in-progress' ? 'status-in-progress' : 
                                                  task.status === 'completed' ? 'status-completed' : 'status-pending';
                                
                                return `
                                    <div class="day-task">
                                        <span class="status ${statusClass}">${statusText}</span>
                                        ${task.title}
                                        ${task.hours > 0 ? `<span style="color: #999; margin-left: 8px;">${task.hours}h</span>` : ''}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        renderTodayTasks();
        renderWeekPlan();
    </script>
</body>
</html>

